<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AJAX demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>

<body class="p-5">
    <h1 class="text-center">AJAX Demo</h1>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>

    <script>

        let aminal;
        let api_json_response;

        // We create XMLHttpRequest object
        const xmlObj = new XMLHttpRequest();

        // Define the handler (What will be done when the response is ready)
        xmlObj.onload = function () {
            // console.log(this.response);
            api_json_response = this.response;
        }

        // Define the request
        xmlObj.open('GET', "https://zoo-animal-api.herokuapp.com/animals/rand");

        // send the request
        xmlObj.send();

        // Explain AJAX sequence
        // console.log(1);
        // setTimeout(() => {
        //     console.log(2);
        // }, 3000);
        // console.log(3);

        // Fetch API
        const apiObj = fetch("https://zoo-animal-api.herokuapp.com/animals/rand");
        // console.log(apiObj);

        // apiObj
        //     .then(function () {
        //         // get money from my bank account
        //         // go to city center
        //         // buy the laptop
        //         // install call of duty
        //         // start gaming
        //     })

        apiObj
            .then((response) => { // will be excuted if the respone is successful.
                // console.log(response);
                return response.json();
            })
            .then((data) => {
                // console.log(data)
                animal = data;
            })
            .catch((error) => { // will be excuted if the response is unsuccessful and there is an error.
                // console.log(error)
            })
            .finally((response) => { // will be excuted anyway. 
                // console.log('Hi from finally!')
            });


            // handle json data
            // let jsObject = JSON.parse(api_json_response) // to convert JSON string to JS object
            // JSON.stringify(jsObject) // to convert JS object to JSON

    </script>
</body>

</html>